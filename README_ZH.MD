# Pandora Box: A Revolutionary Open-Source Python Environment
![](./logo.jpg)


[ä¸­æ–‡](./README_ZH.MD) | [English](./README.MD)

åœ¨å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰çš„æ—¶ä»£ï¼ŒPandora Boxä½œä¸ºä¸€æ¬¾å¼€åˆ›æ€§çš„å¼€æºPythonåŒ…æµ®ç°ï¼Œä¸“é—¨æ—¨åœ¨èµ‹èƒ½å¼€å‘è€…å’Œåˆ›æ–°è€…åˆ›å»ºåŸºäºLLMçš„åº”ç”¨ç¨‹åºå’Œä»£ç†ã€‚è¿™ä¸€å¤šåŠŸèƒ½å·¥å…·æ—¨åœ¨æä¾›ä¸€ä¸ªå¥å£¯ä¸”å®‰å…¨çš„Pythonç¯å¢ƒï¼Œä¾¿äºæ— ç¼é›†æˆå’Œæ‰§è¡ŒLLMé©±åŠ¨çš„é¡¹ç›®ã€‚Pandora Boxå®Œå…¨å…è´¹ï¼Œé€šè¿‡pip installå³å¯è½»æ¾éƒ¨ç½²ï¼Œæ—¨åœ¨å½»åº•æ”¹å˜å¼€å‘è€…å¤„ç†LLMåŸºç¡€å¼€å‘çš„æ–¹å¼ã€‚

Pandora Boxçš„å…³é”®ä¼˜åŠ¿ï¼š

- **å®Œå…¨å¼€æºä¸”å…è´¹**ï¼šé‡‡ç”¨Pandora Boxï¼Œæ‹¥æŠ±å¼€æ”¾å¼€å‘ç²¾ç¥ï¼Œæä¾›å¯¹å…¶æºä»£ç çš„å®Œå…¨è®¿é—®æƒé™ã€‚è¿™ç¡®ä¿äº†ä¸€ä¸ªåä½œä¸”ä¸æ–­è¿›åŒ–çš„å¹³å°ï¼Œä¾›ä»äº‹LLMåº”ç”¨å’Œä»£ç†å¼€å‘çš„å¼€å‘è€…ä½¿ç”¨ï¼Œæ— éœ€ä»»ä½•è´¢åŠ¡éšœç¢ã€‚

- **æ— ç¼æœ¬åœ°éƒ¨ç½²**ï¼šé€šè¿‡ä¸€ä¸ªç®€å•çš„pip installå‘½ä»¤å³å¯ç«‹å³å¼€å§‹ã€‚Pandora Boxçš„å®‰è£…ä¾¿æ·æ€§ä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿè¿…é€Ÿè®¾ç½®å¹¶æ·±å…¥LLMåŸºç¡€é¡¹ç›®å¼€å‘ã€‚

- **å¤šåŠŸèƒ½åº”ç”¨**ï¼šæ— è®ºæ‚¨æ˜¯åœ¨å¼€å‘è¿è¡ŒPythonè„šæœ¬çš„LLMåŸºç¡€ä»£ç†ï¼Œè¿˜æ˜¯é€šè¿‡HTTPéƒ¨ç½²å¤æ‚çš„AIæœåŠ¡ï¼ŒPandora Boxéƒ½æä¾›äº†å®ç°æ‚¨æ„¿æ™¯æ‰€éœ€çš„çµæ´»æ€§å’Œå·¥å…·ã€‚

- **é«˜æ•ˆçš„ç¯å¢ƒç®¡ç†**ï¼šä»¥å‰æ‰€æœªæœ‰çš„ä¾¿æ·æ€§åˆ›å»ºã€æ‰§è¡Œå’Œå…³é—­Pythonç¯å¢ƒã€‚Pandora Boxç®€åŒ–äº†å¼€å‘è¿‡ç¨‹ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿä¸“æ³¨äºåˆ›æ–°ï¼Œè€Œä¸æ˜¯ç¯å¢ƒè®¾ç½®å’Œç®¡ç†ã€‚

- **ç†æƒ³çš„LLMåŸºç¡€ä»£ç†**ï¼šPandora Boxä¸“ä¸ºæ»¡è¶³LLMåŸºç¡€åº”ç”¨å¼€å‘çš„éœ€æ±‚è€Œé‡èº«å®šåˆ¶ã€‚å®ƒæä¾›äº†ä¸€ä¸ªå®‰å…¨ã€éš”ç¦»çš„ç¯å¢ƒï¼Œç”¨äºè¿è¡Œä¸å—ä¿¡ä»»çš„ä»£ç ï¼Œç¡®ä¿æ‚¨çš„LLMä»£ç†èƒ½å¤Ÿå®‰å…¨é«˜æ•ˆåœ°è¿è¡Œã€‚

Pandora Boxä¸ä»…ä»…æ˜¯ä¸€ä¸ªPythonåŒ…ï¼›å®ƒæ˜¯é€šå¾€LLMåŸºç¡€å¼€å‘æœªæ¥çš„å¤§é—¨ã€‚é€šè¿‡æä¾›ä¸€ä¸ªå®‰å…¨ã€æ˜“ç”¨ä¸”å®Œå…¨å¼€æºçš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒä½¿å¼€å‘è€…èƒ½å¤Ÿæ¢ç´¢ä»–ä»¬çš„LLMåº”ç”¨å’Œä»£ç†çš„å…¨éƒ¨æ½œåŠ›ã€‚æ— è®ºæ‚¨æ˜¯åœ¨åˆ›å»ºä¸€ä¸ªç¼–ç åŠ©æ‰‹ã€ä¸€ä¸ªAIæ•°æ®åˆ†æå¸ˆï¼Œè¿˜æ˜¯ä»»ä½•å…¶ä»–LLMé©±åŠ¨çš„å·¥å…·ï¼ŒPandora Boxéƒ½ä¸ºæ‚¨æä¾›äº†åˆ›æ–°å’Œå“è¶Šçš„åŸºç¡€ã€‚
## å®‰è£…
ä¸ºäº†ç¡®ä¿ç¯å¢ƒéš”ç¦»å’Œå®‰å…¨ï¼Œæœ€å¥½ä½¿ç”¨`conda`æ¥åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒã€‚

```commandline
# python >= 3.11
conda create -n pandora-box python=3.11
conda activate pandora-box
pip install PandoraBox
```

## ä½¿ç”¨
Pandora Boxå¯ä»¥é€šè¿‡ä¸¤ç§ä¸åŒçš„æ–¹å¼ä½¿ç”¨ï¼šè¦ä¹ˆé€šè¿‡Pythonè„šæœ¬ï¼Œè¦ä¹ˆé€šè¿‡HTTPæœåŠ¡ï¼Œä»è€Œæ»¡è¶³å¤šç§ä½¿ç”¨åœºæ™¯çš„éœ€æ±‚ã€‚

### HTTP æœåŠ¡
HTTPæœåŠ¡å™¨ä¸»è¦é€šè¿‡`pbox`å‘½ä»¤ä½¿ç”¨ï¼Œè¯¥å‘½ä»¤åŒ…æ‹¬åˆ›å»ºå’ŒæŸ¥è¯¢APIå¯†é’¥ï¼Œä»¥åŠå¯åŠ¨HTTPæœåŠ¡å™¨ã€‚æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨`pbox -h`æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ã€‚

```commandline
$ pbox -h
```
```commandline
usage: pbox [-h] {s,a,k} ...

positional arguments:
  {s,a,k}
    s         Start Pandora Box Server
    a         Add a new API KEY
    k         List all API KEYS

options:
  -h, --help  show this help message and exit
```

åœ¨å¯åŠ¨HTTPæœåŠ¡å™¨ä¹‹å‰ï¼Œæ‚¨éœ€è¦å…ˆä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªAPIå¯†é’¥ï¼Œè¯¥å¯†é’¥å°†ç”¨äºåœ¨è®¿é—®æ‚¨æ¥ä¸‹æ¥åˆ›å»ºçš„HTTPæœåŠ¡å™¨æ—¶è¿›è¡Œèº«ä»½éªŒè¯ã€‚

```commandline
$ pbox a
```
```text
pb-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

æ‚¨å¯ä»¥é€šè¿‡ä¸Šè¿°æ–¹æ³•åˆ›å»ºå¤šä¸ªAPIå¯†é’¥ã€‚

ç„¶åï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ‚¨åˆ›å»ºçš„æ‰€æœ‰APIå¯†é’¥ï¼š
```commandline
$ pbox k
```
```text
API-KEY-1
...
API-KEY-n
```

ç°åœ¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨HTTPæœåŠ¡å™¨ï¼š
```commandline
$ pbox s
```

é»˜è®¤æƒ…å†µä¸‹ï¼ŒæœåŠ¡å¯åŠ¨åœ¨åœ°å€`0.0.0.0`å’Œç«¯å£`9501`ã€‚æ‚¨å¯ä»¥åœ¨ä½¿ç”¨`pbox s`å‘½ä»¤æ—¶ï¼Œé€šè¿‡ä¼ é€’`server`å’Œ`port`å‚æ•°æ¥æŒ‡å®šå¯åŠ¨åœ°å€å’Œç«¯å£ã€‚

```commandline
$ pbox s --server x.x.x.x --port xxxx
```

```commandline
$ pbox s -h
```
```commandline
usage: pbox s [-h] [--server SERVER] [--port PORT]

options:
  -h, --help       show this help message and exit
  --server SERVER  Server address
  --port PORT      Port
```

æ­å–œğŸ‰ï¼Œæ‚¨å·²ç»å¯åŠ¨äº†HTTPæœåŠ¡å™¨ã€‚æ‚¨å¯ä»¥åœ¨http://127.0.0.1:9501/docsæŸ¥çœ‹APIæ–‡æ¡£ã€‚

#### çŠ¶æ€æ£€æŸ¥
æ‚¨å¯ä»¥ä½¿ç”¨`curl`æ¥æ£€æŸ¥httpæœåŠ¡å™¨çš„å¥åº·çŠ¶æ€ï¼š
```commandline
$ curl http://127.0.0.1:9501/health
```
```text
success
```

#### åˆ›å»º Python SandBox
æ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ–¹å¼åˆ›å»ºä¸€ä¸ªPythonæ²™ç›’ç¯å¢ƒï¼š
```commandline
$ curl http://127.0.0.1:9501/create \
-H "API-KEY: your-api-key"
```
```json
{
    "kernel_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
}
```

æ‚¨å°†æ”¶åˆ°ä¸€ä¸ªkernel_idï¼Œè¿™æ˜¯Pythonæ²™ç›’çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚å¦‚æœåˆ›å»ºåè¿”å›äº†kernel_idï¼Œè¿™è¡¨æ˜åˆ›å»ºæˆåŠŸã€‚

#### æŸ¥è¯¢ Python SandBox
å½“å‰å·²åˆ›å»ºçš„Pythonç¯å¢ƒå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æŸ¥è¯¢ï¼š
```commandline
$ curl http://127.0.0.1:9501/kernels \
-H "API-KEY: your-api-key"
```
```json
{
  "kernel_ids":[
    "kernel_id_1", 
    "kernel_id_2", 
    "...", 
    "kernel_id_n"]
}
```

#### æ‰§è¡Œ Python ä»£ç 
ç°åœ¨ï¼Œæ‚¨å¯ä»¥åœ¨è¿™ä¸ªPythonæ²™ç›’ä¸­æ‰§è¡ŒPythonä»£ç ï¼š
```commandline
$ curl http://127.0.0.1:9501/execute \
-H "API-KEY: your-api-key" \
-H "Content-Type: application/json; charset=utf-8" \
-H "KERNEL-ID: your-kernel-id" \
-d '{
    "code": "print(\"Hello, Pandora Box!\")"
}'
```
```json
{
  "results": [],
  "logs": {
    "stdout": ["Hello, Pandora Box!"],
    "stderr": []
  },
  "error": null
}
```

æ‰§è¡ŒPythonä»£ç åï¼Œè¿”å›çš„ç»“æœå¯èƒ½åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š

`results` åŒ…å«äº†base64ç¼–ç çš„å›¾åƒæ•°æ®ï¼Œå¦‚æœæ‚¨ä½¿ç”¨matplotlibç»˜åˆ¶äº†å›¾ç‰‡ã€‚

`logs` åŒ…å«äº†æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰“å°åˆ°æ ‡å‡†è¾“å‡º(stdout)å’Œæ ‡å‡†é”™è¯¯(stderr)çš„ä¿¡æ¯ã€‚æ—¥å¿—çš„ä¾‹å­åŒ…æ‹¬æ‰“å°è¯­å¥ã€è­¦å‘Šã€å­è¿›ç¨‹è¾“å‡ºç­‰ã€‚å®ƒåŒ…å«ä¸¤ä¸ªå­—æ®µï¼š
- `stdout`ï¼šå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œæ¯ä¸ªå­—ç¬¦ä¸²æ˜¯æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºçš„ä¸€è¡Œã€‚
- `stderr`ï¼šå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œæ¯ä¸ªå­—ç¬¦ä¸²æ˜¯æ‰“å°åˆ°æ ‡å‡†é”™è¯¯çš„ä¸€è¡Œã€‚

`error` åŒ…å«äº†æ‰§è¡Œå•å…ƒæ ¼è¿‡ç¨‹ä¸­å‡ºç°çš„é”™è¯¯ä¿¡æ¯ã€‚å®ƒåŒ…å«ä¸‰ä¸ªå­—æ®µï¼š
- `name`ï¼šé”™è¯¯çš„åç§°ï¼Œä¾‹å¦‚NameErrorã€ValueErrorç­‰ã€‚
- `value`ï¼šé”™è¯¯çš„å€¼ï¼Œä¾‹å¦‚'name 'non_existent_variable' is not defined'ç­‰ã€‚
- `traceback`ï¼šé”™è¯¯çš„è¿½è¸ªä¿¡æ¯ã€‚

#### å…³é—­ Python Sandbox
å½“æ‚¨ä¸éœ€è¦ä½¿ç”¨Pythonç¯å¢ƒæ—¶ï¼Œå¯ä»¥åŠæ—¶å…³é—­å®ƒä»¥å‡å°‘èµ„æºæµªè´¹ã€‚

```commandline
$ curl http://127.0.0.1:9501/close \
-H "API-KEY: your-api-key" \
-H "KERNEL-ID: your-kernel-id"
```
```json
{
  "message": "Sandbox Closed."
}
```

æ¯ä¸ªå†…æ ¸å¦‚æœæ²¡æœ‰æ‰‹åŠ¨å…³é—­ï¼Œå°†åœ¨6å°æ—¶åè‡ªåŠ¨å…³é—­ã€‚è¿™æ„å‘³ç€æ¯ä¸ªå†…æ ¸çš„æœ€å¤§æŒç»­æ—¶é—´æ˜¯6å°æ—¶ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†é¿å…èµ„æºæµªè´¹ã€‚å½“å‰ç‰ˆæœ¬è¿˜ä¸æ”¯æŒæŒç»­æ—¶é—´è®¾ç½®ã€‚

### Python è„šæœ¬ä¸­ä½¿ç”¨
æ‚¨å¯ä»¥åœ¨Pythonè„šæœ¬ä¸­ç›´æ¥å¯¼å…¥pboxåŒ…è¿›è¡Œä½¿ç”¨ã€‚å¦‚æœæ‚¨ä¸éœ€è¦ä»»ä½•Pythonç¯å¢ƒç®¡ç†æˆ–APIå¯†é’¥è®¤è¯åŠŸèƒ½ï¼Œæ‚¨å¯ä»¥ç›´æ¥ä½¿ç”¨CodeSandBoxåˆ›å»ºä¸€ä¸ªPythonç¯å¢ƒå¹¶æ‰§è¡Œä»£ç ã€‚
```python
from pbox import CodeSandBox

code_sandbox = CodeSandBox()
result = code_sandbox.execute_code("print('Hello, PandaroBox!')")

print(str(result))
print(result.logs.stdout)
```
```text
Result(results=[], logs=Logs(stdout=['Hello, PandaroBox!'], stderr=[]), error=None)
['Hello, PandaroBox!']
```

è¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ª`Result`ç±»ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨`str()`æŸ¥çœ‹å…·ä½“å†…å®¹ã€‚`Result`ä¸­åŒ…å«çš„`results`æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚`Logs`ä¹Ÿæ˜¯ä¸€ä¸ªç±»ä¼¼äº`Result`çš„ç±»ï¼ŒåŒ…å«ä¸¤ä¸ªåˆ—è¡¨ï¼š`stdout`å’Œ`stderr`ã€‚å½“ä»£ç æ­£å¸¸æ‰§è¡Œæ—¶ï¼Œ`error`ä¸º`null`ï¼›å½“ä»£ç å‡ºç°é”™è¯¯æ—¶ï¼Œ`error`æ˜¯ä¸€ä¸ª`Error`ç±»ï¼ŒåŒ…å«ä¸‰ä¸ªå±æ€§ï¼š`name`ã€`value`å’Œ`traceback`ã€‚å¯ä»¥ä½¿ç”¨`.`æ“ä½œç¬¦è®¿é—®`Result`ã€`Logs`å’Œ`Error`ä¸­çš„å€¼ï¼Œä¾‹å¦‚`result.logs.stdout`ã€‚

`CodeSandBox`å…·æœ‰è®°ä½Pythonä»£ç ä¸Šä¸‹æ–‡çš„èƒ½åŠ›ï¼Œç›´åˆ°å®ƒè¢«å…³é—­ã€‚
```python
from pbox import CodeSandBox

code_sandbox = CodeSandBox()
code_sandbox.execute_code("x = 'Hello, PandoraBox!'")
result = code_sandbox.execute_code("print(x)")

print(str(result))
```
```text
Result(results=[], logs=Logs(stdout=['Hello, PandoraBox!'], stderr=[]), error=None)
```
å¦‚æœæ‚¨ä¸å†éœ€è¦å®ƒï¼Œå¯ä»¥ç›´æ¥å…³é—­å®ƒã€‚

```python
code_sandbox.close()
```

å¦‚æœæ‚¨éœ€è¦APIå¯†é’¥è®¤è¯æœºåˆ¶ä»¥åŠå†…æ ¸åœ¨6å°æ—¶åè‡ªåŠ¨å…³é—­çš„æœºåˆ¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨`CodeSandBoxManager`æ¥åˆ›å»ºå’Œå…³é—­æ²™ç›’ä»¥åŠæ‰§è¡Œä»£ç ã€‚
```python
from pbox import CodeSandBoxManager

csb_manager = CodeSandBoxManager()

# creqte sandbox
kernel_id = csb_manager.create_sandbox("your-api-key")

# list sandbox
csb_manager.kernels("your-api-key")

# execute code
result = csb_manager.execute_code (
    "your-api-key",
    "your-kernel-id",
    "print('Hello, Pandaro Box!')"
)

# close sandbox, If you forget, it will automatically close after 6 hours.
csb_manager.close_sandbox(
    "your-api-key",
    "your-kernel-id"
)
```

## è´¡çŒ®
æ¬¢è¿ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®ã€‚æ‚¨å¯ä»¥å¼€å¯ä¸€ä¸ªé—®é¢˜(issue)æˆ–æäº¤ä¸€ä¸ªæ‹‰å–è¯·æ±‚(pull request)ã€‚

## è”ç³»
æ‚¨å¯ä»¥é€šè¿‡ç”µå­é‚®ä»¶pydaxing@gmail.comä¸æˆ‘ä»¬è”ç³»ã€‚